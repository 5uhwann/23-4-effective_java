---
marp: true
---

# 아이템55: 옵셔널 반환은 신중히 하라

---

### 목차

1. Optional<T>
2. 옵셔널을 반환해야 할 때
3. 정리

---

### Optional<T>

---

`Optional<T>` 는 `null`이 아닌 `T` 타입 참조를 하나 담거나, 혹은 아무것도 담지 않을 수 있다. 이때 아무것도 담지 않은 옵셔널은 ‘비었다’라고 말한다. 반대로 어떤 값을 담은 옵셔널은 ‘비지 않았다’라고 한다.

---

보통은 `T`를 반환해야 하지만 특정 조건에서는 아무것도 반환하지 않아야 할 때 `T` 대신 `Optional<T>` 를 반환하도록 선언한다. 이렇게 하면 유효한 반환값이 없을 때는 빈 결과를 반환할 수 있다.

---

옵셔널을 반환하는 메서드는 예외를 던지는 메서드보다 유연하고 사용하기 쉬우며, `null` 을 반환하는 메서드보다 오류 가능성이 작다.

---

- `Optional.empty()` : 빈 옵셔널 생성

- `Optional.of(value)` : 값이 든 옵셔널 생성

  → 값이 든 옵셔널을 생성할 때 `null`값을 넣으면 NullpointException을 던지니 주의해야 한다!

- `Optional.ofNullable(value)` : `null`값도 허용하는 옵셔널 생성

---

**옵셔널을 반환하는 메서드에서는 절대 `null`을 반환하지 말자!!**

---

### 옵셔널을 반환해야 할 때

---

`null`을 반환하거나 예외를 던지는 대신 옵셔널 반환을 선택하는 기준은 반환값의 유무를 API 사용자에게 전달해야 하는가이다.

메서드가 옵셔널을 반환한다면 클라이언트는 값을 받지 못했을 때 취할 행동을 선택해야 한다.

**즉, 결과가 없을 수 있으며, 클라이언트가 이 상황을 특별하게 처리해야 한다면 Optional<T>를 반환한다.**

---

하지만, 무조건 옵셔널을 반환한다고 득이 되는 것은 아니다.

**컬렉션, 스트림, 배열, 옵셔널 같은 컨테이너 타입은 옵셔널로 감싸면 안된다.**

---

### 정리

값을 반환하지 못할 가능성이 있고, 호출할 때마다 반환값이 없을 가능성을 염두에 둬야 하는 메서드라면 옵셔널을 반환을 고려하자.

옵셔널 반환에는 성능 저하가 뒤따르니, 성능에 민감한 메서드라면 `null`을 반환하거나 예외를 던지자.

옵셔널을 반환값 이외의 용도로 쓰는 경우는 매우 드물다.
