# 아이템 59 : 라이브러리를 익히고 사용하라

## 라이브러리를 잘 익히지 않았을 때의 예시
```java
import java.util.Random;

public class Effective {
    static Random rnd = new Random();
    static int random(int n) {
        // return Math.abs(rnd.nextInt()) % n; // 방법 1
        return Math.abs(rnd.nextInt(n)); // 방법 2
    }
    public static void main(String[] args) {
        int n = 2 * (Integer.MAX_VALUE / 3);
        int low = 0;
        for (int i = 0; i < 1000000; i++) {
            if (random(n) < n/2)
                low++;
        }
        System.out.println(low);
    }
}

```
방법 1의 방식으로 할 경우 다음과 같은 문제가 발생한다.
* n이 그리 크지 않은 2의 제곱수라면 1번의 결과는 0부터 n - 1까지의 값 중 하나를 리턴하여 같은 수열이 반복될 확률이 높다. (ex: 4일 경우 0, 1, 2, 3이 반복될 것이다.)
* n이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반복된다. (ex: 3일 경우 각 숫자가 더 많이 반복됨)
* main 메서드에서의 결과를 이상적으로 생각해보면 50만 개가 출력되어야 하나, 실제로는 생성된 수 중 2/3 가량이 중간값보다 낮은 쪽으로 쏠려 666,666에 가까운 값을 얻는다.
  * 이 이유는 `Integer.MIN_VALUE`를 리턴했을 때 나머지 연산자 `%`는 음수를 반환하여 예상하지 않았던 범위 (최소 0 이상)에 벗어나기 때문이다. (n이 2의 제곱수가 아닐 때)
  * 이 문제를 해결하려면 방법 2의 방식을 사용하면 된다. 이렇듯 제대로 된 라이브러리 사용법을 익혀야 한다.
## 라이브러리를 사용할 때의 장점
* 그 코드를 작성한 전문가의 지식과 나보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.
  * 이미 충분한 실력을 갖춘 개발자가 라이브러리의 코드를 구현해놨고, 버그가 발견될 시 수정하기 때문에 우리는 효율적인 코드를 짧은 시간을 투자해 얻을 수 있다.
* 핵심적인 일과 크게 관련 없는 문제를 해결하느라 시간을 허비하지 않아도 된다.
  * 일반적인 프로그래머들이 원하는 것은 애플리케이션 기능 개발이다. 사용한 커스텀 알고리즘의 성능을 개선하는 것 등은 권장되지 않는다. 핵심적인 것에 집중할 수 있다.
* 따로 노력하지 않아도 성능이 지속해서 개선된다.
  * 라이브러리는 많은 사람들이 사용하는 코드이기에 그만큼 좋은 성능을 보장해야 할 필요가 있다. 업계 표준 벤치마크를 활용하여 성능을 확인하기 때문에 표준 라이브러리 제작자들은 더 좋은 코드를 요구받는다.
* 기능이 점점 많아진다.
  * 라이브러리에 부족한 기능이 있다면 개발자 커뮤니티에서 이야기가 나오고 논의된 후 다음 릴리스에 기능이 추가되곤 한다.
* 내가 작성한 코드가 많은 사람들에게 낯익은 코드가 된다.
  * 위에서 언급한 것 처럼, 많은 사람들이 사용하는 라이브러리 코드는 다른 사람도 사용할 가능성이 높다는 것을 의미한다. 아주 쉽게 예를 들면, `ArrayDeque`의 `addLast` 메서드는 마지막에 데이터를 추가하는 것임을 알 수 있을 것이다.
## 결론
* 바퀴를 다시 발명하지 말 것! 누군가는 이미 만들어놨을 수도 있기에 그것을 가져다 쓰면 높은 품질의 코드를 사용할 수 있다.
* 자바 프로그래머는 적어도 `java.lang`, `java.util`, `java.io`와 그 하위 패키지들에는 익숙해야 한다. (+ 컬렉션 프레임워크, 스트림)
* 라이브러리에 자신이 원하는 기능이 있다는 사실조차 모르는 사람들이 있는데, 자바는 메이저 릴리스마다 새로운 기능을 알려주는 페이지를 제공한다. [링크](https://www.oracle.com/java/technologies/javase/8-whats-new.html)
